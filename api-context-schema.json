{
  "schemaVersion": "2.1.0",
  "lastUpdated": "2025-11-15T15:30:00Z",

  "project": {
    "name": "서울 따릉이 시뮬레이션 플랫폼",
    "version": "1.0.0",
    "type": "frontend-simulation",
    "hasBackend": false,
    "description": "서울 공공자전거 따릉이 시스템을 시뮬레이션하는 프론트엔드 전용 웹 애플리케이션",
    "figmaDesign": "https://www.figma.com/design/aJfOnTQZwtUneqKjGGYkcj/Simulation-Platform-Design",
    "technology": {
      "framework": "React 18.3.1",
      "buildTool": "Vite 6.3.5",
      "compiler": "@vitejs/plugin-react-swc",
      "styling": "TailwindCSS v4",
      "uiLibrary": "shadcn/ui + Radix UI",
      "charts": "Recharts 2.15.2",
      "icons": "Lucide React",
      "forms": "React Hook Form 7.55.0",
      "router": "react-router-dom 7.9.6",
      "toastLibrary": "sonner 2.0.3",
      "stateManagement": "React Context API (built-in)"
    }
  },

  "frontend": {
    "architecture": {
      "pattern": "Component-based SPA",
      "stateManagement": {
        "type": "Context API + React local state",
        "libraries": ["React Context API (built-in)"],
        "description": "Global state managed via Context API (AuthContext, RentalContext). Page-level state still uses useState.",
        "contexts": {
          "AuthContext": {
            "location": "src/contexts/AuthContext.tsx",
            "provides": ["user", "showLoginModal", "showSignupModal", "login", "signup", "logout", "openLoginModal"],
            "hook": "useAuth()"
          },
          "RentalContext": {
            "location": "src/contexts/RentalContext.tsx",
            "provides": ["currentRental", "setCurrentRental", "startRental", "endRental"],
            "hook": "useRental()"
          }
        },
        "localState": {
          "pages": "각 페이지는 자체 local state 관리 (activeTab, selectedItem, filters, etc.)"
        },
        "dataFlow": "Context Providers → useAuth()/useRental() hooks → Components (no props drilling)"
      },
      "routing": {
        "type": "React Router v7",
        "library": "react-router-dom@7.9.6",
        "implementation": "Routes + Route components in App.tsx",
        "description": "URL-based routing with React Router. Browser history support.",
        "routes": [
          { "path": "/", "component": "HomePage" },
          { "path": "/mypage", "component": "MyPage", "protected": "user && user.role !== 'admin'" },
          { "path": "/board", "component": "BoardPage" },
          { "path": "/repair", "component": "RepairPage" },
          { "path": "/route", "component": "RoutePage" },
          { "path": "/ai-course", "component": "AICourseRecommendPage" },
          { "path": "/admin/*", "component": "AdminPage", "protected": "user?.role === 'admin'" }
        ],
        "urlBased": true,
        "browserHistory": true,
        "features": ["URL navigation", "Back/Forward buttons", "Bookmarkable URLs", "Protected routes", "404 redirect"]
      },
      "authentication": {
        "type": "Mock authentication",
        "location": "src/contexts/AuthContext.tsx",
        "implementation": "AuthContext with useAuth() hook",
        "logic": {
          "adminEmail": "admin@test.com",
          "adminRole": "Any email === 'admin@test.com' → role: 'admin'",
          "userRole": "Any other email → role: 'user'",
          "passwordValidation": "No validation (mock system)"
        },
        "features": {
          "login": "Sets user in AuthContext",
          "signup": "Creates new user with role 'user'",
          "logout": "Clears user and dispatches 'auth:logout' event, navigates to home",
          "modalManagement": "showLoginModal, showSignupModal state in AuthContext"
        },
        "storage": "In-memory only (user state in AuthContext)",
        "persistence": "None (resets on page reload)",
        "crossContextCommunication": "Logout dispatches custom event to clear RentalContext"
      },
      "dataSource": {
        "type": "Mock data",
        "location": "src/lib/mockData.ts",
        "pattern": "Import mock arrays → Copy to local state → Mutate locally",
        "persistence": "None (changes lost on reload)",
        "apiCalls": "None (100% client-side)"
      },
      "errorHandling": {
        "errorBoundary": {
          "location": "src/components/ErrorBoundary.tsx",
          "integration": "Wraps entire app in main.tsx",
          "features": [
            "Catches JavaScript errors in component tree",
            "Displays user-friendly error UI",
            "Provides 'Try Again' and 'Go Home' buttons",
            "Logs errors to console",
            "Shows stack trace in development mode"
          ],
          "prevents": "Full app crashes - errors are isolated to error boundary scope"
        }
      }
    },

    "typeDefinitions": {
      "location": "src/types/index.ts (centralized)",
      "reExportedFrom": "src/App.tsx (for backward compatibility)",
      "coreTypes": {
        "User": "Authentication and user profile",
        "SignupData": "Signup form data structure",
        "Station": "Bike station information",
        "Rental": "Bike rental records"
      },
      "boardTypes": {
        "Post": "Board post with category, content, stats",
        "Comment": "Post comment",
        "PostCategory": "'notice' | 'info' | 'question' | 'free'"
      },
      "repairTypes": {
        "Repair": "Repair report with status tracking",
        "RepairType": "'bike' | 'station'",
        "RepairCategory": "'brake' | 'tire' | 'chain' | 'light' | 'seat' | 'bell' | 'other'",
        "RepairStatus": "'pending' | 'in-progress' | 'completed'"
      },
      "routeTypes": {
        "Route": "Recommended cycling route",
        "RouteDifficulty": "'easy' | 'medium' | 'hard'"
      },
      "uiTypes": {
        "MyPageTab": "'history' | 'stats' | 'settings'",
        "AdminTab": "'dashboard' | 'users' | 'stations' | 'bikes' | 'repairs'",
        "SortBy": "'date' | 'distance' | 'duration'",
        "ViewMode": "'map' | 'list'"
      },
      "importPattern": "import type { User, Station, Rental } from '@/types'",
      "note": "All types centralized in src/types/index.ts. App.tsx re-exports for backward compatibility."
    },

    "components": {
      "structure": {
        "root": "src/App.tsx",
        "entry": "src/main.tsx",
        "layout": ["src/components/layout/Navbar.tsx"],
        "pages": "src/components/pages/*.tsx (7 page components)",
        "features": {
          "auth": ["src/components/auth/LoginModal.tsx", "src/components/auth/SignupModal.tsx"],
          "home": ["src/components/home/MapView.tsx", "src/components/home/ListView.tsx", "src/components/home/StationDetailModal.tsx"],
          "mypage": ["src/components/mypage/RentalHistory.tsx", "src/components/mypage/UserStats.tsx", "src/components/mypage/UserSettings.tsx"],
          "board": ["src/components/board/BoardList.tsx", "src/components/board/PostDetail.tsx", "src/components/board/PostEditor.tsx"],
          "repair": ["src/components/repair/RepairForm.tsx", "src/components/repair/RepairList.tsx"],
          "admin": ["src/components/admin/AdminDashboard.tsx", "src/components/admin/AdminUsers.tsx", "src/components/admin/AdminStations.tsx", "src/components/admin/AdminBikes.tsx", "src/components/admin/AdminRepairs.tsx"]
        },
        "ui": {
          "location": "src/components/ui/*.tsx",
          "count": "50+ components",
          "library": "shadcn/ui + Radix UI",
          "editPolicy": "DO NOT EDIT (pre-built UI components)"
        }
      },

      "hierarchy": {
        "main.tsx": {
          "renders": "BrowserRouter → ErrorBoundary → AuthProvider → RentalProvider → App",
          "purpose": "Wraps app with routing, error handling, and context providers"
        },
        "App.tsx": {
          "state": "None (moved to Context)",
          "usesContexts": ["useAuth()"],
          "renders": ["Navbar", "Routes (with Route components)", "LoginModal (conditional)", "SignupModal (conditional)"],
          "children": {
            "Navbar": {
              "props": "None",
              "hooks": ["useAuth()", "useRental()", "useNavigate()", "useLocation()"],
              "responsibilities": ["Navigation", "User status display", "Rental indicator"],
              "note": "⚠️ Partially migrated - still expects props in current code"
            },
            "HomePage": {
              "props": "None (will use hooks)",
              "hooks": ["useAuth()", "useRental()"],
              "state": ["viewMode", "searchTerm", "selectedDistrict", "bikeFilter", "selectedStation", "stations"],
              "children": ["MapView", "ListView", "StationDetailModal"],
              "note": "⚠️ Not yet migrated to Context"
            },
            "MyPage": {
              "props": "None (will use hooks)",
              "hooks": ["useAuth()"],
              "state": ["activeTab"],
              "children": ["RentalHistory", "UserStats", "UserSettings"],
              "accessControl": "user.role !== 'admin' required"
            },
            "BoardPage": {
              "props": "None (will use hooks)",
              "hooks": ["useAuth()"],
              "state": ["selectedPostId", "isWriting"],
              "children": ["BoardList", "PostDetail", "PostEditor"],
              "note": "⚠️ Not yet migrated to Context"
            },
            "RepairPage": {
              "props": "None (will use hooks)",
              "hooks": ["useAuth()"],
              "state": ["activeView"],
              "children": ["RepairForm", "RepairList"],
              "note": "⚠️ Not yet migrated to Context"
            },
            "RoutePage": {
              "props": [],
              "state": ["currentLocation", "destination", "routeResult"],
              "features": ["Haversine distance calculation", "Mock geocoding", "Nearest station finder"]
            },
            "AICourseRecommendPage": {
              "props": [],
              "state": ["prompt", "courseInfo", "loading"],
              "features": ["Keyword-based mock AI recommendations"]
            },
            "AdminPage": {
              "props": [],
              "state": ["activeTab"],
              "children": ["AdminDashboard", "AdminUsers", "AdminStations", "AdminBikes", "AdminRepairs"],
              "accessControl": "user.role === 'admin' required (checked in App.tsx)"
            }
          }
        }
      }
    },

    "pages": [
      {
        "name": "HomePage",
        "route": "currentPage === 'home'",
        "file": "src/components/pages/HomePage.tsx",
        "description": "대여소 현황 조회 및 자전거 대여/반납",
        "props": {
          "user": "User | null",
          "currentRental": "Rental | null",
          "onRent": "(rental: Rental) => void",
          "onLoginRequired": "() => void"
        },
        "features": [
          "Map view / List view toggle",
          "Station search (name/address)",
          "District filter (25 Seoul districts)",
          "Bike availability filter (all/available/unavailable)",
          "Station detail modal",
          "Bike rental action (creates currentRental)",
          "Auto-refresh option (mock real-time updates)"
        ],
        "mockData": ["mockStations", "seoulDistricts"],
        "stateFlow": {
          "rental": "StationDetailModal → HomePage.onRent → App.setCurrentRental → Navbar (displays rental status)"
        }
      },
      {
        "name": "MyPage",
        "route": "currentPage === 'mypage'",
        "file": "src/components/pages/MyPage.tsx",
        "description": "마이페이지 (대여 이력, 통계, 설정)",
        "props": {
          "user": "User (required, non-admin only)"
        },
        "features": [
          "3 tabs: 대여 이력 / 이용 통계 / 설정",
          "Rental history with charts (Recharts)",
          "User statistics (total distance, duration, count)",
          "User settings management"
        ],
        "mockData": ["mockRentals"],
        "accessControl": "Rendered only if user && user.role !== 'admin'"
      },
      {
        "name": "BoardPage",
        "route": "currentPage === 'board'",
        "file": "src/components/pages/BoardPage.tsx",
        "description": "커뮤니티 게시판",
        "props": {
          "user": "User | null"
        },
        "features": [
          "Post list (categories: notice, info, question, free)",
          "Post detail view",
          "Post editor (requires login)",
          "Search, filter by category",
          "View counts, likes, comments"
        ],
        "mockData": ["mockPosts"],
        "views": ["list", "detail", "editor"],
        "navigation": "State-based view switching (selectedPostId, isWriting)"
      },
      {
        "name": "RepairPage",
        "route": "currentPage === 'repair'",
        "file": "src/components/pages/RepairPage.tsx",
        "description": "자전거/대여소 고장 신고",
        "props": {
          "user": "User | null",
          "onLoginRequired": "() => void"
        },
        "features": [
          "Repair report list",
          "Repair form (requires login)",
          "Categories: brake, tire, chain, light, seat, bell, other",
          "Status: pending, in-progress, completed"
        ],
        "mockData": ["mockRepairs"],
        "views": ["list", "form"]
      },
      {
        "name": "RoutePage",
        "route": "currentPage === 'route'",
        "file": "src/components/pages/RoutePage.tsx",
        "description": "길찾기 및 경로 안내",
        "props": {},
        "features": [
          "Start/End location input",
          "Mock geocoding (address → coordinates)",
          "Nearest station finder (Haversine formula)",
          "Route calculation (distance, duration, walking distance)",
          "Station selection from list"
        ],
        "algorithms": [
          "Haversine formula for distance calculation",
          "Mock geocoding (hash-based coordinate generation)"
        ],
        "mockData": ["mockStations"]
      },
      {
        "name": "AICourseRecommendPage",
        "route": "currentPage === 'aicourserecommend'",
        "file": "src/components/pages/AICourseRecommendPage.tsx",
        "description": "AI 기반 자전거 코스 추천",
        "props": {},
        "features": [
          "Natural language prompt input",
          "Keyword-based mock AI recommendations",
          "Course info: name, description, duration, calories, difficulty, distance, highlights",
          "Difficulty levels: 최하, 하, 중, 상, 최상",
          "Loading state simulation (2 second delay)"
        ],
        "keywords": ["한강", "강변", "남산", "야간", "밤", "초보", "쉬운"],
        "mockAPI": "Simulated AI response with 2s delay"
      },
      {
        "name": "AdminPage",
        "route": "currentPage === 'admin'",
        "file": "src/components/pages/AdminPage.tsx",
        "description": "관리자 대시보드",
        "props": {},
        "features": [
          "5 tabs: 대시보드 / 회원 관리 / 대여소 관리 / 자전거 관리 / 고장 처리",
          "Statistics with charts (Recharts)",
          "CRUD operations for users, stations, bikes, repairs",
          "All operations are mock (local state only)"
        ],
        "mockData": ["mockStations", "mockRentals", "mockRepairs"],
        "accessControl": "Rendered only if user?.role === 'admin' (checked in App.tsx line 114)"
      }
    ],

    "stateFlows": {
      "authentication": {
        "login": [
          "User clicks login button in Navbar",
          "Navbar calls onLoginClick()",
          "App.tsx sets showLoginModal = true",
          "LoginModal renders",
          "User submits credentials",
          "LoginModal calls onLogin(email, password)",
          "App.tsx handleLogin() creates mock user",
          "App.tsx sets user state",
          "LoginModal closes (showLoginModal = false)",
          "Navbar re-renders with user info"
        ],
        "logout": [
          "User clicks logout in Navbar",
          "Navbar calls onLogout()",
          "App.tsx sets user = null, currentRental = null, currentPage = 'home'",
          "All components re-render with no user"
        ]
      },
      "bikeRental": {
        "rent": [
          "User views station detail in HomePage",
          "User clicks '대여' button",
          "StationDetailModal validates (user logged in, bike available)",
          "StationDetailModal creates Rental object",
          "Calls onRent(newRental)",
          "HomePage forwards to App.tsx",
          "App.tsx sets currentRental state",
          "Navbar displays rental indicator"
        ],
        "return": [
          "User clicks return in Navbar or StationDetailModal",
          "Updates currentRental with endStation, returnTime, distance, duration",
          "App.tsx sets currentRental = null",
          "Rental added to user's history (mock)"
        ]
      },
      "navigation": {
        "pageChange": [
          "User clicks navigation button in Navbar",
          "Navbar calls onPageChange(newPage)",
          "App.tsx sets currentPage = newPage",
          "App.tsx conditionally renders new page component",
          "Navbar highlights active page"
        ]
      },
      "dataManagement": {
        "pattern": "Mock data → Local state → Mutations → Display",
        "example": [
          "import { mockStations } from '@/lib/mockData'",
          "const [stations, setStations] = useState(mockStations)",
          "// Simulate CRUD: setStations([...stations, newStation])",
          "// No persistence, resets on reload"
        ]
      }
    }
  },

  "data": {
    "mockData": {
      "location": "src/lib/mockData.ts",
      "description": "All mock data for the simulation",
      "exports": {
        "mockStations": {
          "type": "Station[]",
          "count": 15,
          "description": "서울 주요 지역 대여소 15개",
          "includes": ["가산디지털단지역", "강남역", "여의도한강공원", "서울역", "홍대입구역", "광화문광장", "잠실종합운동장", "이태원역", "반포한강공원", "건대입구역", "코엑스", "명동역", "신촌역", "청계천", "북한산국립공원"]
        },
        "mockRentals": {
          "type": "Rental[]",
          "count": 11,
          "description": "User ID '1'의 대여 이력 11건 (2~75일 전)",
          "details": "각 rental은 출발지, 도착지, 시간, 거리, 소요시간 포함"
        },
        "mockPosts": {
          "type": "Post[]",
          "count": 5,
          "description": "커뮤니티 게시글 5개",
          "categories": ["notice", "info", "question", "free"],
          "includes": ["시스템 업데이트 안내", "한강 야간 라이딩 코스 추천", "대여 시 결제 문의", "날씨 관련 자유글", "이용 팁"]
        },
        "mockRepairs": {
          "type": "Repair[]",
          "count": 3,
          "description": "고장 신고 3건",
          "statuses": ["completed", "in-progress", "pending"],
          "categories": ["brake", "chain", "tire"]
        },
        "seoulDistricts": {
          "type": "string[]",
          "count": 25,
          "description": "서울시 25개 구",
          "usage": "대여소 필터링에 사용"
        },
        "recommendedRoutes": {
          "type": "Route[]",
          "count": 4,
          "description": "추천 라이딩 코스 4개",
          "difficulties": ["easy", "medium", "hard"],
          "includes": ["한강 야경 라이딩", "서울 도심 투어", "홍대-이대-신촌 캠퍼스 투어", "한강 종주 도전"]
        }
      },
      "usagePattern": {
        "import": "import { mockStations } from '@/lib/mockData'",
        "initialization": "const [stations, setStations] = useState(mockStations)",
        "mutation": "setStations(prevStations => [...prevStations, newStation])",
        "persistence": "None - all changes lost on page reload"
      }
    },

    "typeDefinitions": {
      "coreTypes": {
        "location": "src/App.tsx",
        "types": ["User", "Station", "Rental"],
        "import": "import { User, Station, Rental } from '../../App'"
      },
      "pageSpecificTypes": {
        "Post": {
          "location": "src/lib/mockData.ts (inferred from data)",
          "fields": {
            "id": "string",
            "category": "'notice' | 'info' | 'question' | 'free'",
            "title": "string",
            "content": "string",
            "author": "string",
            "authorId": "string",
            "views": "number",
            "likes": "number",
            "comments": "number",
            "createdAt": "Date",
            "isPinned": "boolean | undefined"
          }
        },
        "Repair": {
          "location": "src/lib/mockData.ts (inferred from data)",
          "fields": {
            "id": "string",
            "type": "'bike' | 'station'",
            "bikeId": "string | undefined",
            "stationId": "string | undefined",
            "category": "'brake' | 'chain' | 'tire' | 'light' | 'seat' | 'bell' | 'other'",
            "description": "string",
            "reporter": "string",
            "reporterId": "string",
            "status": "'pending' | 'in-progress' | 'completed'",
            "createdAt": "Date",
            "completedAt": "Date | undefined",
            "adminNote": "string | undefined"
          }
        },
        "CourseInfo": {
          "location": "src/components/pages/AICourseRecommendPage.tsx",
          "fields": {
            "name": "string",
            "description": "string",
            "duration": "number (minutes)",
            "calories": "number (kcal)",
            "difficulty": "'최하' | '하' | '중' | '상' | '최상'",
            "distance": "number (km)",
            "highlights": "string[]"
          }
        },
        "Route": {
          "location": "src/lib/mockData.ts (recommendedRoutes)",
          "fields": {
            "id": "string",
            "name": "string",
            "description": "string",
            "stations": "string[] (station IDs)",
            "distance": "number (km)",
            "duration": "number (minutes)",
            "difficulty": "'easy' | 'medium' | 'hard'",
            "tags": "string[]"
          }
        }
      }
    },

    "dataFlow": {
      "pattern": "Context-based centralized state + Local component state",
      "globalState": {
        "owner": "Context Providers (AuthContext, RentalContext)",
        "access": "Via useAuth() and useRental() hooks",
        "benefits": ["No props drilling", "Centralized state logic", "Easy testing", "Cross-component communication"],
        "contexts": {
          "AuthContext": {
            "provides": {
              "user": {
                "type": "User | null",
                "access": "Any component via useAuth()",
                "updates": "login(), signup(), logout()"
              },
              "modals": {
                "showLoginModal": "boolean",
                "showSignupModal": "boolean",
                "controls": "setShowLoginModal(), setShowSignupModal(), openLoginModal()"
              }
            }
          },
          "RentalContext": {
            "provides": {
              "currentRental": {
                "type": "Rental | null",
                "access": "Any component via useRental()",
                "updates": "startRental(), endRental(), setCurrentRental()"
              }
            },
            "features": {
              "autoCleanup": "Listens to 'auth:logout' event to clear rental on logout"
            }
          }
        }
      },
      "localState": {
        "pattern": "Each page component manages its own state",
        "examples": {
          "HomePage": ["viewMode", "searchTerm", "selectedDistrict", "bikeFilter", "selectedStation", "stations"],
          "MyPage": ["activeTab"],
          "BoardPage": ["selectedPostId", "isWriting"],
          "RepairPage": ["activeView"],
          "AdminPage": ["activeTab"]
        }
      },
      "migrationStatus": {
        "completed": [
          "AuthContext created with login, signup, logout",
          "RentalContext created with rental management",
          "Context providers integrated in main.tsx",
          "App.tsx refactored to use Context",
          "Cross-context communication via custom events"
        ],
        "pending": [
          "Navbar migration to useAuth() and useRental()",
          "HomePage migration to Context hooks",
          "Other pages (MyPage, BoardPage, RepairPage) migration"
        ],
        "note": "⚠️ App currently broken - Context created but components still expect props"
      }
    }
  },

  "api": {
    "status": "planned",
    "implementationStatus": "Not implemented - all endpoints are future specifications",
    "currentBehavior": "No API calls are made. All data is from mockData.ts and managed in local state.",
    "migrationNote": "When backend is implemented, replace mock data imports with API calls to these endpoints",
    "baseUrl": "/api",

    "endpoints": [
      {
        "category": "Authentication",
        "endpoints": [
          {
            "method": "POST",
            "path": "/auth/login",
            "description": "사용자 로그인",
            "currentImplementation": "App.tsx handleLogin() - mock logic",
            "requestBody": {
              "email": "string",
              "password": "string"
            },
            "response": {
              "user": "User",
              "token": "string"
            }
          },
          {
            "method": "POST",
            "path": "/auth/signup",
            "description": "회원가입",
            "currentImplementation": "App.tsx handleSignup() - mock logic",
            "requestBody": {
              "email": "string",
              "password": "string",
              "name": "string",
              "phone": "string"
            },
            "response": {
              "user": "User",
              "token": "string"
            }
          },
          {
            "method": "GET",
            "path": "/auth/check-email",
            "description": "이메일 중복 확인",
            "currentImplementation": "Not implemented",
            "queryParams": {
              "email": "string"
            },
            "response": {
              "available": "boolean"
            }
          }
        ]
      },
      {
        "category": "Stations",
        "endpoints": [
          {
            "method": "GET",
            "path": "/stations",
            "description": "대여소 목록 조회",
            "currentImplementation": "mockStations from mockData.ts",
            "response": "Station[]"
          },
          {
            "method": "GET",
            "path": "/stations/status",
            "description": "대여소 실시간 현황 갱신",
            "currentImplementation": "HomePage auto-refresh (simulated)",
            "response": "StationStatus[]"
          },
          {
            "method": "GET",
            "path": "/stations/nearest",
            "description": "가장 가까운 대여소 찾기",
            "currentImplementation": "RoutePage findNearestStation() - Haversine formula",
            "queryParams": {
              "lat": "number",
              "lon": "number"
            },
            "response": "Station"
          }
        ]
      },
      {
        "category": "Rentals",
        "endpoints": [
          {
            "method": "POST",
            "path": "/rentals",
            "description": "자전거 대여",
            "currentImplementation": "StationDetailModal creates rental object, updates App.tsx currentRental state",
            "requestBody": {
              "userId": "string (from auth)",
              "stationId": "string (from selection)"
            },
            "response": "Rental"
          },
          {
            "method": "PUT",
            "path": "/rentals/:rentalId/return",
            "description": "자전거 반납",
            "currentImplementation": "Updates currentRental then sets to null in App.tsx",
            "requestBody": {
              "endStationId": "string (from selection)",
              "returnTime": "string (auto-generated)"
            },
            "response": "RentalComplete"
          },
          {
            "method": "GET",
            "path": "/users/:userId/rentals",
            "description": "사용자 대여 이력 조회",
            "currentImplementation": "mockRentals filtered by userId",
            "queryParams": {
              "page": "number (default: 1)",
              "limit": "number (default: 10)"
            },
            "response": "RentalsListResponse"
          }
        ]
      },
      {
        "category": "Board",
        "endpoints": [
          {
            "method": "GET",
            "path": "/board/posts",
            "description": "게시글 목록 조회",
            "currentImplementation": "mockPosts from mockData.ts",
            "queryParams": {
              "page": "number (default: 1)",
              "limit": "number (default: 20)",
              "search": "string (optional)",
              "category": "string (optional)"
            },
            "response": "PostsListResponse"
          },
          {
            "method": "POST",
            "path": "/board/posts",
            "description": "게시글 작성",
            "currentImplementation": "Local state mutation in BoardList",
            "requestBody": {
              "title": "string",
              "content": "string",
              "authorId": "string (from auth)",
              "category": "string (optional)"
            },
            "response": "Post"
          },
          {
            "method": "GET",
            "path": "/board/posts/:postId",
            "description": "게시글 상세 조회",
            "currentImplementation": "Find in mockPosts by ID",
            "response": "Post"
          },
          {
            "method": "PUT",
            "path": "/board/posts/:postId",
            "description": "게시글 수정",
            "currentImplementation": "Local state mutation",
            "requestBody": {
              "title": "string (optional)",
              "content": "string (optional)"
            },
            "response": "Post"
          },
          {
            "method": "DELETE",
            "path": "/board/posts/:postId",
            "description": "게시글 삭제",
            "currentImplementation": "Local state mutation",
            "response": null
          }
        ]
      },
      {
        "category": "Repairs",
        "endpoints": [
          {
            "method": "GET",
            "path": "/repairs/my",
            "description": "내 신고 내역 조회",
            "currentImplementation": "mockRepairs filtered by userId",
            "queryParams": {
              "userId": "string (from auth)"
            },
            "response": "Repair[]"
          },
          {
            "method": "POST",
            "path": "/repairs",
            "description": "고장 신고 등록",
            "currentImplementation": "Local state mutation in RepairList",
            "requestBody": {
              "bikeId": "string",
              "stationId": "string",
              "userId": "string (from auth)",
              "category": "'brake' | 'tire' | 'chain' | 'light' | 'seat' | 'bell' | 'other'",
              "description": "string",
              "photos": "string[] (optional)"
            },
            "response": "Repair"
          },
          {
            "method": "GET",
            "path": "/repairs/:repairId",
            "description": "신고 상세 조회",
            "currentImplementation": "Find in mockRepairs by ID",
            "response": "Repair"
          }
        ]
      },
      {
        "category": "Routes & AI",
        "endpoints": [
          {
            "method": "GET",
            "path": "/geocode",
            "description": "주소를 좌표로 변환",
            "currentImplementation": "RoutePage addressToCoordinates() - hash-based mock",
            "queryParams": {
              "address": "string"
            },
            "response": "Coordinates { lat: number, lon: number }"
          },
          {
            "method": "POST",
            "path": "/routes/calculate",
            "description": "최적 경로 계산",
            "currentImplementation": "RoutePage local calculation with Haversine",
            "requestBody": {
              "startLat": "number",
              "startLon": "number",
              "endLat": "number",
              "endLon": "number"
            },
            "response": "RouteInfo"
          },
          {
            "method": "POST",
            "path": "/ai/recommend-course",
            "description": "AI 코스 추천",
            "currentImplementation": "AICourseRecommendPage fetchCourseRecommendation() - keyword matching",
            "requestBody": {
              "prompt": "string",
              "userId": "string (optional)",
              "preferences": {
                "difficulty": "'최하' | '하' | '중' | '상' | '최상'",
                "duration": "number (optional)",
                "distance": "number (optional)"
              }
            },
            "response": "CourseInfo"
          }
        ]
      },
      {
        "category": "Admin",
        "endpoints": [
          {
            "method": "GET",
            "path": "/admin/statistics",
            "description": "전체 시스템 통계 조회",
            "currentImplementation": "AdminDashboard - hardcoded stats",
            "queryParams": {
              "startDate": "string (optional)",
              "endDate": "string (optional)"
            },
            "response": "AdminStatistics"
          },
          {
            "method": "GET",
            "path": "/admin/users",
            "description": "회원 목록 조회",
            "currentImplementation": "AdminUsers - mock user list",
            "queryParams": {
              "page": "number (default: 1)",
              "limit": "number (default: 20)",
              "search": "string (optional)"
            },
            "response": "UsersListResponse"
          },
          {
            "method": "PUT",
            "path": "/admin/users/:userId/status",
            "description": "회원 상태 변경",
            "currentImplementation": "Local state mutation",
            "requestBody": {
              "status": "'active' | 'blocked'"
            },
            "response": "User"
          },
          {
            "method": "DELETE",
            "path": "/admin/users/:userId",
            "description": "회원 삭제",
            "currentImplementation": "Local state mutation",
            "response": null
          },
          {
            "method": "POST",
            "path": "/admin/stations",
            "description": "대여소 추가",
            "currentImplementation": "AdminStations - local state mutation",
            "requestBody": {
              "name": "string",
              "address": "string",
              "latitude": "number",
              "longitude": "number",
              "capacity": "number"
            },
            "response": "Station"
          },
          {
            "method": "PUT",
            "path": "/admin/stations/:stationId",
            "description": "대여소 정보 수정",
            "currentImplementation": "Local state mutation",
            "requestBody": {
              "name": "string (optional)",
              "address": "string (optional)",
              "bikeCount": "number (optional)",
              "status": "'active' | 'inactive' (optional)"
            },
            "response": "Station"
          },
          {
            "method": "DELETE",
            "path": "/admin/stations/:stationId",
            "description": "대여소 삭제",
            "currentImplementation": "Local state mutation",
            "response": null
          },
          {
            "method": "GET",
            "path": "/admin/repairs",
            "description": "고장 신고 목록 조회",
            "currentImplementation": "AdminRepairs - mockRepairs",
            "queryParams": {
              "status": "'pending' | 'in-progress' | 'completed' (optional)",
              "page": "number (default: 1)"
            },
            "response": "RepairsListResponse"
          },
          {
            "method": "PUT",
            "path": "/admin/repairs/:repairId",
            "description": "고장 처리 상태 업데이트",
            "currentImplementation": "Local state mutation",
            "requestBody": {
              "status": "'pending' | 'in-progress' | 'completed'",
              "adminNote": "string (optional)"
            },
            "response": "Repair"
          }
        ]
      },
      {
        "category": "User Profile",
        "endpoints": [
          {
            "method": "GET",
            "path": "/users/:userId",
            "description": "사용자 정보 조회",
            "currentImplementation": "user state from App.tsx",
            "response": "User"
          },
          {
            "method": "PUT",
            "path": "/users/:userId",
            "description": "사용자 정보 수정",
            "currentImplementation": "UserSettings - local state mutation",
            "requestBody": {
              "name": "string (optional)",
              "phone": "string (optional)",
              "email": "string (optional)"
            },
            "response": "User"
          },
          {
            "method": "PUT",
            "path": "/users/:userId/password",
            "description": "비밀번호 변경",
            "currentImplementation": "Not implemented",
            "requestBody": {
              "currentPassword": "string",
              "newPassword": "string"
            },
            "response": null
          },
          {
            "method": "GET",
            "path": "/users/:userId/statistics",
            "description": "사용자 통계 조회",
            "currentImplementation": "UserStats - calculated from mockRentals",
            "response": {
              "totalRentals": "number",
              "totalDistance": "number",
              "totalDuration": "number",
              "averageDistance": "number",
              "averageDuration": "number"
            }
          }
        ]
      }
    ]
  },

  "development": {
    "setup": {
      "install": "npm i",
      "dev": "npm run dev (starts on port 3000, auto-opens browser)",
      "build": "npm run build (outputs to /build directory)"
    },
    "configuration": {
      "vite": {
        "file": "vite.config.ts",
        "server": {
          "port": 3000,
          "open": true
        },
        "pathAlias": {
          "@": "./src"
        },
        "build": {
          "target": "esnext",
          "outDir": "build"
        }
      }
    },
    "testing": {
      "status": "No tests configured",
      "framework": "None"
    },
    "linting": {
      "status": "No linter configured",
      "formatter": "None"
    }
  },

  "notes": {
    "forDevelopers": [
      "This is a 100% frontend simulation with no backend",
      "All data is hardcoded in mockData.ts and managed in local state",
      "No API calls are made - all 'API endpoints' in this schema are future specs",
      "State resets on page reload (no persistence)",
      "Use admin@test.com to get admin role, any other email gets user role",
      "UI components in src/components/ui/ are from shadcn/ui - do not edit",
      "Types are centralized in src/types/index.ts",
      "React Router provides URL-based navigation",
      "State is managed via Context API (AuthContext, RentalContext)",
      "ErrorBoundary wraps the entire app for graceful error handling"
    ],
    "forAI": [
      "Always check mockData.ts first when looking for data",
      "Types are in src/types/index.ts (centralized)",
      "Global state is in Context (AuthContext, RentalContext) - use useAuth() and useRental() hooks",
      "React Router is used - look for Routes and Route components",
      "UI components are read-only - don't edit shadcn/ui files",
      "When implementing features, simulate API calls with local state mutations",
      "Remember: no backend exists, all operations are client-side only",
      "⚠️ CURRENT STATUS: Context API partially implemented - components need migration to hooks"
    ],
    "futureWork": [
      "Complete Context migration for all components (Navbar, HomePage, etc.)",
      "Implement actual backend API",
      "Add database for persistence",
      "Replace mock data with API calls",
      "Add proper authentication with JWT",
      "Implement real geocoding API",
      "Add actual AI integration for course recommendations",
      "Add Storage abstraction layer (planned)",
      "Replace alert() with Toast notifications (sonner library available)",
      "Add ARIA labels for accessibility",
      "Add unit tests and E2E tests",
      "Add ESLint and Prettier"
    ]
  },

  "recentImprovements": {
    "phase1": {
      "date": "2025-11-15",
      "status": "✅ Completed",
      "duration": "8-12 hours",
      "changes": [
        "Created src/types/index.ts - centralized all type definitions",
        "Removed all 'any' types from codebase (8+ files affected)",
        "Replaced unsafe 'as any' type assertions with proper union types",
        "Implemented ErrorBoundary component for app stability",
        "Confirmed React Router v7 already integrated",
        "All builds passing with zero TypeScript errors"
      ],
      "impact": {
        "typeSafety": "100% - Zero any types remaining",
        "errorHandling": "App no longer crashes on component errors",
        "maintainability": "Types centralized and reusable"
      }
    },
    "phase2": {
      "date": "2025-11-15",
      "status": "⚠️ Partial (In Progress)",
      "duration": "4-6 hours (so far)",
      "changes": [
        "Created AuthContext (src/contexts/AuthContext.tsx) for authentication state",
        "Created RentalContext (src/contexts/RentalContext.tsx) for rental state",
        "Integrated Context Providers in main.tsx (BrowserRouter → ErrorBoundary → AuthProvider → RentalProvider → App)",
        "Refactored App.tsx to use useAuth() hook",
        "Implemented cross-context communication via custom events (auth:logout)",
        "Added useCallback for performance optimization"
      ],
      "remaining": [
        "Update Navbar.tsx to use useAuth() and useRental() hooks",
        "Update HomePage.tsx to use Context hooks",
        "Update MyPage, BoardPage, RepairPage to use Context",
        "Remove all props drilling throughout the app",
        "Test Context integration end-to-end"
      ],
      "currentIssue": "⚠️ App is broken - Context created but components still expect props from App.tsx",
      "nextSteps": "Complete component migration to finish Phase 2"
    },
    "phase2Planned": {
      "storage": "Create storage.ts utility class to abstract localStorage",
      "toast": "Integrate Sonner toast system to replace alert()",
      "accessibility": "Add ARIA labels and keyboard navigation support"
    }
  }
}
